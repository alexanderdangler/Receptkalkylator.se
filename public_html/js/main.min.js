function setUpInitialForm(t,e,a){$("#alertReceptInfo").removeClass("d-none"),$(".btnSelector").addClass("btn-outline-primary").removeClass("btn-primary"),$("input,button").removeAttr("disabled"),$(e).removeClass("btn-outline-primary").addClass("btn-primary"),$(a).prop("disabled",!0),currentFunction=t,mainFunction()}function mainFunction(){function t(){var t=DateTime.fromISO(a),e=DateTime.fromISO(n),r=luxon.Interval.fromDateTimes(t,e),i=Math.round(r.length("days"));return i}function e(){let t,e=r.replace(/\*|X/g,"x").replace(",",".");if(e.search(/\+/)>0){function a(t){return new Function("return "+t)()}t=a(e)}else{let a=/([0-9.]+)/.exec(e),n=/([0-9]+)/.exec(/x([0-9]+)/.exec(e));t=null!==n?a[0]*n[0]:a[0]}return t}const a=$("#fromDate").val(),n=$("#toDate").val(),r=$("#dosage").val(),i=$("#packageSize").val(),o=$("#withdrawls").val();if("uttag"===currentFunction&&($(".btnExtraInfo").text(""),"string"==typeof a&&"string"==typeof n)){var l=t();if("string"==typeof r){var s=e();if("string"==typeof i){var c=Math.ceil(l*s/i);$("#withdrawls").val(c),$("#btnUttagSpan").text(": "+c+" uttag")}}}if("dagar"===currentFunction&&($(".btnExtraInfo").text(""),"string"==typeof r)){s=e();if("string"==typeof i&&"string"==typeof o){l=Math.ceil(i*o/s);if("string"==typeof a){var u=DateTime.fromISO(a).plus({days:l}),f=DateTime.now();if($("#toDate").val(u.toISODate()),u>f){var g=Math.ceil(u.diff(f).as("days"));$("#btnDagarSpan").text(": "+g+" dagar")}else $("#btnDagarSpan").text(": Receptet tog slut "+u.toISODate())}}}if("average"===currentFunction&&($(".btnExtraInfo").text(""),"string"==typeof a&&"string"==typeof n)){l=t();if("string"==typeof i&&"string"==typeof o){var p=i*o,m=p/l;m=Math.round(10*(m+Number.EPSILON))/10,$("#dosage").val(m+"x1"),$("#btnAverageSpan").text(": "+m+" tabletter/dag")}}}function changeDate(t,e,a,n){if("+"===t)var r=DateTime.now().plus({[a]:e}).toISODate();else if("-"===t)r=DateTime.now().minus({[a]:e}).toISODate();$(n).val(r),mainFunction()}var currentFunction,DateTime=luxon.DateTime;$(function(){$("#fromDate, #toDate, #dosage, #packageSize, #withdrawls").on("input",mainFunction),$("#btnDagar").on("click",function(){setUpInitialForm("dagar","#btnDagar","#toDate,#btnToDate")}),$("#btnUttag").on("click",function(){setUpInitialForm("uttag","#btnUttag","#withdrawls")}),$("#btnAverage").on("click",function(){setUpInitialForm("average","#btnAverage","#dosage")})});